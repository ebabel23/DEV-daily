<div
  id="template-tracking"
  external-event
  external-event-trackingVars="'level': 'header', 'template': 'Header Plus-Banner','variant': '[%% Tracking_Variant %%]', 'event': 'eec.promoView'"
  external-event-params="{{params}}"
></div>
<div custom-script>
  // Tracking $( "#template-tracking" ).trigger( "click", function() {
  window.console.log("Tracking Clicked"); });
</div>

<a
  href="#"
  target="_[%% Link-Ziel %%]"
  external-event="HeaderSubButton_LP"
  class="plus-banner"
  external-event-trackingVars="'level': 'header', 'template': 'Header Plus-Banner', 'variant': '[%% Tracking_Variant %%]', 'event': 'eec.promoClick'"
  external-event-params="{{params}}"
>
  <div class="button-wrapper">
    <div class="center-logo">
      <div class="plus-logo"></div>
    </div>
    <div class="plus-banner__text">[%% Text %%]</div>
    <div class="plus-banner__text--mobile">[%% Text Mobil %%]</div>
  </div>
</a>

<script>
  const refurl = document.referrer;
  const url = new URL(refurl);
  const domain = "https://" + url.hostname;
  const variolink = domain + "[%% Link %%]";
  const target = "[%% Link-Ziel %%]";
  const fieldlink = "[%% Link %%]";
  const fullurl = fieldlink.includes("https");
  const redirect = "[%% Redirect_Link %%]";

  let plusBanner = document.getElementsByClassName("plus-banner")[0];
  //let closeButton = document.getElementsByClassName("plus-banner__close")[0];

  window.addEventListener(
    "DOMContentLoaded",
    function () {
      if (plusBanner.classList.contains("plus-banner")) {
        if (fullurl) {
          plusBanner.setAttribute(
            "href",
            fieldlink +
              "?tpcc=[%% Tracking_Variant %%]_subscribe-header-cta" +
              redirect
          );
        } else {
          plusBanner.setAttribute(
            "href",
            variolink +
              "?tpcc=[%% Tracking_Variant %%]_subscribe-header-cta" +
              redirect
          );
        }
      }
    },
    false
  );
</script>
